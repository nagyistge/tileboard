<!DOCTYPE html>
<meta charset="utf-8">
<style>
html {
  font-family: "Helvetica Neue", Helvetica, sans-serif;
}

body.paused {
  background: salmon;
}

body:not(.paused) #pause:before {
  content: "Pause";
}

body.paused #pause:before {
  content: "Unpause";
}

.board tr {
  display: block;
}

.board td {
  display: inline-block;
  position: relative;
  width: 64px;
  height: 64px;
  background: black;
  border-right: 1px solid white;
  border-bottom: 1px solid white;
  padding: 0;
}

.board img {
  position: absolute;
  top: 0px;
  left: 0px;
  width: 100%;
  height: 100%;
  z-index: 1;
}

.js-moving {
  transition-property: left, top;
  transition-duration: 1s, 1s;
  -webkit-transition-property: left, top;
  -webkit-transition-duration: 1s, 1s;
}
</style>
<title>Tileboard</title>
<h1>Tileboard</h1>
<div id="board-holder"></div>
<button id="pause"></button>
<script src="tileboard.js"></script>
<script src="tileboard.random-mover.js"></script>
<script src="tileboard.smoothify-movement.js"></script>
<script>
"use strict";

window.addEventListener("DOMContentLoaded", function() {
  var table = Tileboard.makeEmptyBoard();
  var smoothifyObserver = Tileboard.smoothifyMovement(table);
  
  var piece = document.createElement("img");
  piece.classList.add("random-mover");
  piece.src = "https://developer.cdn.mozilla.net/media/img/mdn-logo-sm.png";
  table.querySelector("#a1").appendChild(piece);
  document.getElementById("board-holder").appendChild(table);
  
  Tileboard.on('change:isPaused', function() {
    if (Tileboard.isPaused)
      document.body.classList.add("paused");
    else
      document.body.classList.remove("paused");
  });
  
  document.getElementById("pause").onclick = function() {
    Tileboard.setPaused(!Tileboard.isPaused);
  };
  
  window.webxrayWhenGogglesLoad = function(ui) {
    Tileboard.setPaused(true);
    ui.on('quit', function() {
      Tileboard.setPaused(false);
    });
  };
}, false);
</script>
<script src="vendor/zepto.js"></script>
