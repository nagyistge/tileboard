<!DOCTYPE html>
<meta charset="utf-8">
<link rel="stylesheet" href="main.css">
<style>
.board td {
  background: black;
  border-right: 1px solid white;
  border-bottom: 1px solid white;
}

.js-moving {
  transition-property: left, top;
  transition-duration: 1s, 1s;
  -webkit-transition-property: left, top;
  -webkit-transition-duration: 1s, 1s;
}
</style>
<title>Tileboard</title>
<h1>Tileboard</h1>
<div id="panes">
  <div id="board-holder"></div>
  <textarea id="css"></textarea>
</div>
<button id="pause"></button>
<button id="edit-css"></button>
<script src="tileboard.js"></script>
<script src="tileboard.random-mover.js"></script>
<script src="tileboard.smoothify-movement.js"></script>
<script src="vendor/zepto.js"></script>
<script>
$(window).ready(function() {
  var table = $(".board")[0] || (function makeDefaultBoard() {
    var table = $(Tileboard.makeEmptyBoard()).appendTo("#board-holder");
    var piece = $('<img class="random-mover" src="https://' + 
        'developer.cdn.mozilla.net/media/img/mdn-logo-sm.png">')
      .appendTo("#a1");
    return table[0];
  })();
  var smoothifyObserver = Tileboard.smoothifyMovement(table);
  var style = $("style");

  $("#edit-css").click(function() {  $("body").toggleClass("editing-css"); });
  $("#css").text(style.text()).bind("change keyup", function() {
    style.text(this.value);
  });

  // Pause logic.

  Tileboard.on('change:isPaused', function() {
    $(document.body).toggleClass("paused", Tileboard.isPaused);
  });
  $("#pause").click(function() { Tileboard.setPaused(!Tileboard.isPaused); });
  window.webxrayWhenGogglesLoad = function(ui) {
    var oldPauseState = Tileboard.isPaused;
    Tileboard.setPaused(true);
    ui.on('quit', function() { Tileboard.setPaused(oldPauseState); });
  };
});
</script>
